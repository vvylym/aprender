# Nextest configuration for aprender
# Canonical pattern from bashrs/trueno

[store]
dir = "target/nextest"

[profile.default]
retries = 0
slow-timeout = { period = "60s", terminate-after = 2 }
fail-fast = false
test-threads = "num-cpus"

[profile.coverage]
# Optimized for coverage runs with LLVM instrumentation overhead
retries = 0
slow-timeout = { period = "90s", terminate-after = 2 }
fail-fast = false
test-threads = "num-cpus"
status-level = "pass"

[[profile.coverage.overrides]]
# Property tests need more time under instrumentation
filter = 'test(/prop_/)'
slow-timeout = { period = "120s", terminate-after = 2 }

[[profile.coverage.overrides]]
# Format/conversion tests can be slow with large test data
filter = 'test(/format_|import_|export_|convert_/)'
slow-timeout = { period = "120s", terminate-after = 2 }

[profile.ci]
retries = 1
slow-timeout = { period = "120s", terminate-after = 2 }
fail-fast = false
