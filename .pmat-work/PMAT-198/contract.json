{
  "work_item_id": "PMAT-198",
  "github_issue": 185,
  "title": "GH-185: GGUF → APR conversion missing embedded tokenizer merges",
  "created_at": "2026-01-30T00:00:00Z",
  "status": "in_progress",
  "severity": "P0",
  "approach": "Add missing tokenizer.merges embedding to write_apr_file_raw",
  "five_whys": [
    "WHY does APR inference produce wrong output? → Tokenizer can't encode properly",
    "WHY can't tokenizer encode? → BPE merges are missing from APR file",
    "WHY are merges missing? → write_apr_file_raw doesn't embed tok.merges",
    "WHY doesn't it embed merges? → Code was incomplete - vocabulary yes, merges no",
    "ROOT CAUSE: write_apr_file_raw missing merges embedding (lines 1560-1595)"
  ],
  "toyota_way_principle": "Jidoka - Stop the line, fix the defect at source",
  "implementation": {
    "phases": [
      "Phase 1: Add merges embedding to write_apr_file_raw",
      "Phase 2: Add F-CONV-TOK tests to verify fix",
      "Phase 3: Verify round-trip conversion preserves tokenization"
    ],
    "files_modified": [
      "src/format/converter.rs"
    ]
  },
  "falsification_gates": [
    "F-CONV-TOK-001: APR file contains tokenizer.merges metadata",
    "F-CONV-TOK-002: Round-trip GGUF→APR→inference produces same output",
    "F-CONV-TOK-003: apr rosetta convert embeds tokenizer properly"
  ]
}
