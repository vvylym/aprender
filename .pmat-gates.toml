# PMAT Quality Gate Configuration for aprender
# ComputeBrick ecosystem - ML inference runtime
# Updated for PMAT v2.215.0

[gates]
# Run clippy linter
run_clippy = true

# Enforce strict clippy (-D warnings)
clippy_strict = true

# Run test suite
run_tests = true

# Test timeout in seconds
test_timeout = 600

# Check code coverage
check_coverage = true

# Minimum coverage percentage (target: 95%, achieved: 96.94%)
min_coverage = 95.0

# Check cyclomatic complexity
check_complexity = true

# Maximum cyclomatic complexity per function
max_complexity = 10

[exclude]
# mdBook generated files (not our code)
patterns = [
    "**/book/**",
    "**/target/**",
]

[dead_code]
# Library crates have higher "dead code" due to public APIs used by external consumers
# 30% threshold accounts for public APIs not called internally
max_dead_code_percent = 30.0
# Exclude files that are primarily public API surface
exclude_patterns = [
    "src/nn/functional.rs",      # PyTorch-style F.relu() API
    "src/nn/init.rs",            # Weight initialization API
    "src/metrics/classification.rs", # sklearn-style metrics API
]

[compute-brick]
enabled = true
require_safety_comments = true
require_target_feature = true
cv_threshold_percent = 15.0
efficiency_threshold_percent = 25.0

[hooks]
pre_commit = ["pmat comply check --failures-only"]
